define("TopicsView",["jquery","underscore","backbone","text!../templates/topic.html","ConfirmView","jqueryColor"],function(e,t,n,r,i){var s,o={"click .del":"remove"},u,a,f;return s=n.View.extend({initialize:function(n){t(this).bindAll("add"),this.collection&&(this.collection.bind("add",this.add),this.tags=[],f=n.screen_name,a=e("#loading")),this.template=t.template(r)},render:function(){return e(this.el).html(this.template({topic:this.model.attributes,user:{screen_name:f}})),this},add:function(e){var t=new s({model:e}),n=this;t.delegateEvents(o),this.tags[e.attributes._id]=t,a.before(t.render().el),e.id=e.attributes._id,e.urlRoot="api/1/"+f+"/topic",e.bind("delete",function(t){n.collection.remove(e),e.destroy({success:function(){t()},error:function(e,t,r){n.$el.find(".load").addClass("error"),console.log("ERROR",t)}})})},renderAll:function(){var e=this;t.each(this.collection.models,function(t){e.add(t)})},remove:function(){var e=this.$el,t=this;u.render({text:'Remove "<b>'+this.model.attributes.name+"</b>\" and all it's notes?",yes:"Yes!",no:"Nope"},function(){e.find(".del").hide(),e.find(".load").removeClass("hide"),t.model.trigger("delete",function(){e.fadeOut(100,function(){e.remove()})})})}}),s.setConfirmView=function(e){u=e},s})